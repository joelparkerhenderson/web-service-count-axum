# Crate Documentation

**Version:** 1.3.0

**Format Version:** 45

# Module `web_service_count_axum`

# Web service count axum
 
**[documentation](https://docs.rs/web-service-count-axum/)**
•
**[source](https://github.com/joelparkerhenderson/web-service-count-axum/)**
•
**[llms.txt](https://raw.githubusercontent.com/joelparkerhenderson/web-service-count-axum/refs/heads/main/llms.txt)**
•
**[crate](https://crates.io/crates/web-service-count-axum)**
•
**[email](mailto:joel@joelparkerhenderson.com)**

Web service that displays the hit count by using Axum, Tokio, Rust.
 
This is a very simple web service that we use for testing our systems.
 
## Steps
 
Run the service on host 0.0.0.0 port 3000 or wherever you wish:
 
```sh
cargo run -- "0.0.0.0:3000"
```
 
Browse <https://localhost:3000>
 
You should see a web page that displays the hit count.
 
Use your browser to reload the web page.
 
You should see the hit count increase by one.
 
## References
 
Based on Demo Rust Axum free open source software:
<https://github.com/joelparkerhenderson/demo-rust-axum>
 

## Modules

## Module `app`

```rust
pub(crate) mod app { /* ... */ }
```

### Functions

#### Function `app`

Create our application by creating our router.

```rust
pub fn app() -> axum::Router { /* ... */ }
```

#### Function `fallback`

axum handler for any request that fails to match the router routes.
This implementation returns HTTP status code Not Found (404).

```rust
pub async fn fallback(uri: axum::http::Uri) -> impl axum::response::IntoResponse { /* ... */ }
```

#### Function `count`

axum handler for "GET /count" which shows the program's count duration.
This shows how to write a handler that uses a global static lazy value.

```rust
pub async fn count() -> String { /* ... */ }
```

### Constants and Statics

#### Static `COUNT`

Create the atomic variable COUNT so the program can track its own count.

```rust
pub static COUNT: std::sync::atomic::AtomicUsize = _;
```

## Functions

### Function `main`

The main function does these steps: 
- Start tracing and emit a tracing event.
- Get a command line argument as our bind address.
- Build our application by creating our router.
- Run our application as a hyper server.

```rust
pub(crate) fn main() { /* ... */ }
```

### Function `shutdown_signal`

Shutdown signal to run axum with graceful shutdown when
a user presses Ctrl+C or Unix sends a terminate signal.

```rust
pub async fn shutdown_signal() { /* ... */ }
```

